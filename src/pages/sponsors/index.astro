---
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import HeadTitle from "../../components/HeadTitle.astro";
import SponsorsData from "../../../public/json/sponsors.json";
import Button from "../../components/Button.astro";
import { mail_llegada_correos_patrocinios } from "../../lib/constants";

interface Sponsor {
  name: string;
  logo: string;
  url?: string;
  tier?: string;
  description?: string;
}

const sponsors = (SponsorsData.sponsors || []) as Sponsor[];
const tiers = [
  { key: "SOCIO ESTRATEGICO", label: "Socio estrategico" },
  { key: "PATROCINADOR OFICIAL", label: "Patrocinador oficial" },
  { key: "COLABORADOR", label: "Colaborador" },
];
const sponsorMailto = `mailto:${mail_llegada_correos_patrocinios}?subject=Queremos%20formar%20parte%20de%20la%20familia%20TARS%20Robotics%20UPV`;
---

<Layout title="Sponsors | TARS Innovacion y excelencia en robotica competitiva">
  <Header />
  <HeadTitle
    icon="/img/money.svg"
    text="Sponsors"
    description="Nuestros aliados clave y colaboradores que hacen posible TARS."
  />

  <main class="max-w-[1400px] mx-auto px-4 sm:px-10 pb-16">
    <section class="mb-10 flex flex-col gap-4">
      <h2 class="text-3xl font-bold text-white">Aliados que impulsan TARS</h2>
      <p class="text-white/70 max-w-3xl">
        Estas organizaciones apoyan nuestras ideas, prototipos y competiciones. Descubre como colaboran y conoce mas sobre ellas.
      </p>
      <span class="w-fit">
        <Button
          icon="/img/money.svg"
          href={sponsorMailto}
          text="Ser patrocinador"
        />
      </span>
    </section>

    <div class="flex flex-col gap-10">
      {
        tiers.map((tier) => {
          const tierSponsors = sponsors.filter(
            (sponsor) => sponsor.tier === tier.key
          );
          if (tierSponsors.length === 0) return null;

          return (
            <section class="flex flex-col gap-4">
              <div class="flex items-center gap-3">
                <div class="w-2 h-8 rounded-full bg-blue-500/70"></div>
                <h3 class="text-xl font-semibold text-white/80 tracking-wide uppercase">
                  {tier.label}
                </h3>
              </div>

              <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                {
                  tierSponsors.map((sponsor) => (
                    <div class="group relative p-6 rounded-xl bg-[#181818] border border-zinc-800/40 hover:border-blue-500/40 transition-all hover:-translate-y-1 flex flex-col gap-4">
                      <div class="absolute inset-0 rounded-xl bg-gradient-to-br from-blue-500/5 via-transparent to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none" />
                      <div class="flex items-center justify-between gap-3">
                        <div class="flex items-center gap-3">
                          <div class="p-3 rounded-lg bg-white/5 border border-white/5">
                            <img
                              src={sponsor.logo}
                              alt={sponsor.name}
                              class="max-h-10 max-w-[140px] object-contain"
                              loading="lazy"
                            />
                          </div>
                          <div>
                            <h4 class="text-lg font-semibold text-white">
                              {sponsor.name}
                            </h4>
                            <p class="text-xs text-white/50">{tier.label}</p>
                          </div>
                        </div>
                        {
                          sponsor.url && (
                            <a
                              href={sponsor.url}
                              target="_blank"
                              rel="noreferrer"
                              class="text-xs text-blue-400 hover:text-blue-300 underline"
                            >
                              Web
                            </a>
                          )
                        }
                      </div>
                      {
                        sponsor.description && (
                          <p class="text-white/70 text-sm leading-relaxed">
                            {sponsor.description}
                          </p>
                        )
                      }
                    </div>
                  ))
                }
              </div>
            </section>
          );
        })
      }
    </div>
  </main>

  <Footer />
</Layout>
